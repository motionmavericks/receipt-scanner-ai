<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a1a1a">
    <title>Receipt Scanner - Fast Batch Capture</title>
    <link rel="manifest" href="/receipt-scanner-ai/manifest.json">
    <link rel="apple-touch-icon" href="/receipt-scanner-ai/icons/icon-192.png">
    <link rel="icon" type="image/png" href="/receipt-scanner-ai/icons/icon-192.png">
  <script type="module" crossorigin src="/receipt-scanner-ai/assets/index-BLqFqC8b.js"></script>
  <link rel="stylesheet" crossorigin href="/receipt-scanner-ai/assets/index-CzySxdrR.css">
<link rel="manifest" href="/receipt-scanner-ai/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/receipt-scanner-ai/registerSW.js"></script></head>
<body>
    <div id="app">
        <!-- Camera View -->
        <div id="camera-container" class="camera-container">
            <video id="camera-feed" autoplay playsinline></video>
            <canvas id="detection-overlay" class="detection-overlay"></canvas>
            <div id="capture-flash" class="capture-flash"></div>
        </div>

        <!-- UI Controls -->
        <div class="controls">
            <div class="top-bar">
                <div class="status">
                    <span id="model-status" class="status-indicator">Loading Model...</span>
                    <span id="fps-counter" class="fps-counter"></span>
                </div>
                <button id="settings-btn" class="icon-btn" aria-label="Settings">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3"/>
                    </svg>
                </button>
            </div>

            <div class="bottom-bar">
                <button id="gallery-btn" class="icon-btn" aria-label="Gallery">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                        <path d="M8.5 10.5L12 14l3.5-3.5M16 8l2 2"/>
                    </svg>
                    <span id="capture-count" class="badge">0</span>
                </button>
                
                <button id="capture-mode-btn" class="capture-mode-btn active">
                    <span class="mode-text">AUTO</span>
                </button>
                
                <button id="manual-capture-btn" class="capture-btn">
                    <div class="capture-btn-inner"></div>
                </button>
            </div>
        </div>

        <!-- Settings Panel -->
        <div id="settings-panel" class="panel settings-panel">
            <div class="panel-header">
                <h2>Settings</h2>
                <button id="close-settings" class="close-btn">×</button>
            </div>
            <div class="panel-content">
                <div class="setting-group">
                    <label for="confidence-threshold">Detection Confidence</label>
                    <div class="slider-container">
                        <input type="range" id="confidence-threshold" min="0.5" max="1" step="0.05" value="0.85">
                        <span id="confidence-value">85%</span>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label for="stability-frames">Stability Frames</label>
                    <div class="slider-container">
                        <input type="range" id="stability-frames" min="3" max="15" step="1" value="5">
                        <span id="stability-value">5</span>
                    </div>
                </div>

                <div class="setting-group">
                    <label for="model-select">Detection Model</label>
                    <select id="model-select">
                        <option value="yolos-tiny">YOLOS Tiny (Fast)</option>
                        <option value="yolos-small">YOLOS Small (Balanced)</option>
                        <option value="detr-resnet-50">DETR ResNet-50 (Accurate)</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="sound-enabled" checked>
                        Sound Effects
                    </label>
                </div>

                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="vibration-enabled" checked>
                        Vibration Feedback
                    </label>
                </div>
            </div>
        </div>

        <!-- Gallery Panel -->
        <div id="gallery-panel" class="panel gallery-panel">
            <div class="panel-header">
                <h2>Captured Receipts (<span id="gallery-count">0</span>)</h2>
                <button id="close-gallery" class="close-btn">×</button>
            </div>
            <div class="panel-content">
                <div class="gallery-actions">
                    <button id="select-all-btn" class="action-btn">Select All</button>
                    <button id="export-selected-btn" class="action-btn" disabled>Export Selected</button>
                    <button id="delete-selected-btn" class="action-btn danger" disabled>Delete Selected</button>
                </div>
                <div id="gallery-grid" class="gallery-grid"></div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="spinner"></div>
            <p id="loading-text">Initializing Receipt Scanner...</p>
        </div>

        <!-- Image Viewer Modal -->
        <div id="image-viewer" class="image-viewer">
            <button id="close-viewer" class="close-btn">×</button>
            <img id="viewer-image" src="" alt="Receipt">
            <div class="viewer-controls">
                <button id="viewer-prev" class="nav-btn">‹</button>
                <span id="viewer-index">1 / 1</span>
                <button id="viewer-next" class="nav-btn">›</button>
            </div>
        </div>
    </div>

</body>
</html>